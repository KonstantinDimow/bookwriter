<%= stylesheet_link_tag "versions" %>

<h2>Versionsübersicht: <%= @book.title %> / <%= @chunk.title %></h2>

<table class="table table-striped">

  <tr>
    <th>Version</th>
    <th>Inhalt</th>
    <th>Benutzer</th>
    <th>Erstellt am</th>
    <th></th>
  </tr>

  <% @amount.times { |i| vers = @chunk.versions[@chunk.versions.last.index - i] %>
    <% unless vers.index == 0 %>
      <tr>
        <td ><%= vers.index %></td>
        <td class="version-content"><%= raw (vers.reify.content) %></td>
        <td><%= User.find(vers.whodunnit).username %></td>
        <td><%= vers.created_at  %></td>
        <td ><%= button_to 'Revert', @chunk.book_id.to_s << @chunk.id.to_s << '/revert/' << vers.index.to_s , method: :post, :class => 'btn btn-default btn-xs'%></td>
      </tr>
      <% end %>
  <%} %>
  <tr>
    <td colspan="5">
      <div id="selectEntryAmount">
        <%=link_to '10', {:controller => 'versions', :action => 'show', :entries => '10'}%> |
        <%=link_to '25', {:controller => 'versions', :action => 'show', :entries => '25'}%> |
        <%=link_to '50', {:controller => 'versions', :action => 'show', :entries => '50'}%> |
        <%=link_to 'All', {:controller => 'versions', :action => 'show', :entries => '-1'}%>
      </div>
    </td>
  </tr>
</table>

<%= button_to 'Zurück', book_url(@chunk.book_id) , method: :get,:class => 'btn btn-default' %>

